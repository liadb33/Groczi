generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Chains {
  ChainId   BigInt      @id
  ChainName String?     @db.VarChar(255)
  SubChains SubChains[]
}

model Stores {
  StoreId           Int                 @id
  SubChainId        Int?
  StoreType         Int?
  StoreName         String?             @db.VarChar(255)
  Address           String?             @db.VarChar(255)
  City              String?             @db.VarChar(255)
  ZipCode           String?             @db.VarChar(20)
  GroceryReferences GroceryReferences[]
  SubChains         SubChains?          @relation(fields: [SubChainId], references: [SubChainId], onDelete: NoAction, onUpdate: NoAction, map: "Stores_ibfk_1")

  @@index([SubChainId], map: "SubChainId")
}

model SubChains {
  SubChainId   Int      @id
  ChainId      BigInt?
  SubChainName String?  @db.VarChar(255)
  Stores       Stores[]
  Chains       Chains?  @relation(fields: [ChainId], references: [ChainId], onDelete: NoAction, onUpdate: NoAction, map: "SubChains_ibfk_1")

  @@index([ChainId], map: "ChainId")
}

model Grocery {
  itemCode                    String              @id @db.VarChar(50)
  itemType                    Int?
  itemName                    String?             @db.VarChar(255)
  manufacturerName            String?             @db.VarChar(255)
  manufactureCountry          String?             @db.VarChar(100)
  manufacturerItemDescription String?             @db.Text
  unitQty                     String?             @db.VarChar(100)
  unitOfMeasure               String?             @db.VarChar(50)
  isWeighted                  Boolean?
  qtyInPackage                Int?
  unitOfMeasurePrice          Decimal?            @db.Decimal(12, 2)
  quantity                    Decimal?            @db.Decimal(12, 2)
  GroceryReferences           GroceryReferences[]
}

model GroceryReferences {
  itemCode      String   @db.VarChar(50)
  storeId       Int
  itemPrice     Decimal? @db.Decimal(12, 2)
  allowDiscount Boolean?
  Grocery       Grocery  @relation(fields: [itemCode], references: [itemCode], onDelete: NoAction, onUpdate: NoAction, map: "GroceryReferences_ibfk_1")
  Stores        Stores   @relation(fields: [storeId], references: [StoreId], onDelete: NoAction, onUpdate: NoAction, map: "GroceryReferences_ibfk_2")

  @@id([itemCode, storeId])
  @@index([storeId], map: "storeId")
}
