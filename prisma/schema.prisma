generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model bookmark {
  id          String      @id @db.VarChar(255)
  deviceId    String      @db.VarChar(255)
  itemCode    String      @db.VarChar(255)
  createdAt   DateTime?   @default(now()) @db.DateTime(0)
  device_user device_user @relation(fields: [deviceId], references: [deviceId], onDelete: Cascade, map: "fk_bookmark_device")

  @@unique([deviceId, itemCode], map: "unique_device_grocery")
  @@index([itemCode], map: "fk_bookmark_grocery")
}

model cart_item {
  id        String    @id @db.VarChar(255)
  deviceId  String    @db.VarChar(255)
  itemCode  String    @db.VarChar(255)
  quantity  Int
  createdAt DateTime? @default(now()) @db.DateTime(0)

  @@unique([deviceId, itemCode], map: "unique_device_cart_item")
  @@index([itemCode], map: "fk_cart_grocery")
}

model chains {
  ChainId   String  @id @db.VarChar(255)
  ChainName String? @db.VarChar(255)
}

model device_user {
  deviceId  String     @id @db.VarChar(255)
  createdAt DateTime?  @default(now()) @db.DateTime(0)
  bookmark  bookmark[]
}

model grocery {
  itemCode           String   @id @db.VarChar(50)
  itemType           Int?
  itemName           String?  @db.VarChar(100)
  manufacturerName   String?  @db.VarChar(100)
  unitQty            String?  @db.VarChar(50)
  unitOfMeasure      String?  @db.VarChar(50)
  isWeighted         Boolean?
  qtyInPackage       Int?
  unitOfMeasurePrice Decimal? @db.Decimal(12, 2)
  quantity           Decimal? @db.Decimal(12, 2)
  imageUrl           String?  @db.VarChar(1000)
}

model grocery_list {
  id        String    @id @db.VarChar(255)
  name      String    @db.VarChar(255)
  deviceId  String    @db.VarChar(255)
  createdAt DateTime? @default(now()) @db.DateTime(0)

  @@index([deviceId], map: "fk_list_device")
}

model list_item {
  id        String    @id @db.VarChar(255)
  listId    String    @db.VarChar(255)
  itemCode  String    @db.VarChar(255)
  quantity  Int
  createdAt DateTime? @default(now()) @db.DateTime(0)

  @@index([itemCode], map: "fk_listitem_grocery")
  @@index([listId], map: "fk_listitem_list")
}

model promotion {
  PromotionId   String    @db.VarChar(100)
  ChainId       String    @db.VarChar(100)
  SubChainId    String    @db.VarChar(100)
  StoreId       String    @db.VarChar(100)
  PromotionName String?   @db.VarChar(100)
  StartDate     DateTime? @db.DateTime(0)
  EndDate       DateTime? @db.DateTime(0)

  @@id([PromotionId, ChainId, SubChainId, StoreId])
  @@index([ChainId, SubChainId, StoreId], map: "ChainId")
}

model promotion_grocery {
  PromotionId   String   @db.VarChar(100)
  ChainId       String   @db.VarChar(100)
  SubChainId    String   @db.VarChar(100)
  StoreId       String   @db.VarChar(100)
  itemCode      String   @db.VarChar(100)
  DiscountPrice Decimal? @db.Decimal(12, 2)

  @@id([PromotionId, ChainId, SubChainId, StoreId, itemCode])
  @@index([itemCode], map: "itemCode")
}

model store_grocery {
  itemCode      String   @db.VarChar(100)
  ChainId       String   @db.VarChar(100)
  SubChainId    String   @db.VarChar(100)
  StoreId       String   @db.VarChar(100)
  itemPrice     Decimal? @db.Decimal(12, 2)
  allowDiscount Boolean?

  @@id([itemCode, ChainId, SubChainId, StoreId])
  @@index([ChainId, SubChainId, StoreId], map: "ChainId")
}

model stores {
  ChainId    String  @db.VarChar(255)
  SubChainId String  @db.VarChar(255)
  StoreId    String  @db.VarChar(255)
  StoreType  Int?
  StoreName  String? @db.VarChar(255)
  Address    String? @db.VarChar(255)
  City       String? @db.VarChar(255)
  ZipCode    String? @db.VarChar(100)
  Latitude   Float?
  Longitude  Float?

  @@id([ChainId, SubChainId, StoreId])
}

model subchains {
  ChainId      String  @db.VarChar(255)
  SubChainId   String  @db.VarChar(255)
  SubChainName String? @db.VarChar(255)

  @@id([ChainId, SubChainId])
}
