generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model chains {
  ChainId   String      @id @db.VarChar(255)
  ChainName String?     @db.VarChar(255)
  subchains subchains[]
}

model stores {
  ChainId       String          @db.VarChar(255)
  SubChainId    String          @db.VarChar(255)
  StoreId       String          @db.VarChar(255)
  StoreType     Int?
  StoreName     String?         @db.VarChar(255)
  Address       String?         @db.VarChar(255)
  City          String?         @db.VarChar(255)
  ZipCode       String?         @db.VarChar(100)
  store_grocery store_grocery[]
  subchains     subchains       @relation(fields: [ChainId, SubChainId], references: [ChainId, SubChainId], onDelete: NoAction, onUpdate: NoAction, map: "stores_ibfk_1")

  @@id([ChainId, SubChainId, StoreId])
}

model subchains {
  ChainId      String   @db.VarChar(255)
  SubChainId   String   @db.VarChar(255)
  SubChainName String?  @db.VarChar(255)
  stores       stores[]
  chains       chains   @relation(fields: [ChainId], references: [ChainId], onDelete: NoAction, onUpdate: NoAction, map: "subchains_ibfk_1")

  @@id([ChainId, SubChainId])
}

model grocery {
  itemCode                    String          @id @db.VarChar(255)
  itemType                    Int?
  itemName                    String?         @db.VarChar(255)
  manufacturerName            String?         @db.VarChar(255)
  manufactureCountry          String?         @db.VarChar(100)
  manufacturerItemDescription String?         @db.Text
  unitQty                     String?         @db.VarChar(100)
  unitOfMeasure               String?         @db.VarChar(50)
  isWeighted                  Boolean?
  qtyInPackage                Int?
  unitOfMeasurePrice          Decimal?        @db.Decimal(12, 2)
  quantity                    Decimal?        @db.Decimal(12, 2)
  store_grocery               store_grocery[]
}

model store_grocery {
  itemCode      String   @db.VarChar(100)
  ChainId       String   @db.VarChar(100)
  SubChainId    String   @db.VarChar(100)
  StoreId       String   @db.VarChar(100)
  itemPrice     Decimal? @db.Decimal(12, 2)
  allowDiscount Boolean?
  grocery       grocery  @relation(fields: [itemCode], references: [itemCode], onDelete: NoAction, onUpdate: NoAction, map: "store_grocery_ibfk_1")
  stores        stores   @relation(fields: [ChainId, SubChainId, StoreId], references: [ChainId, SubChainId, StoreId], onDelete: NoAction, onUpdate: NoAction, map: "store_grocery_ibfk_2")

  @@id([itemCode, ChainId, SubChainId, StoreId])
  @@index([ChainId, SubChainId, StoreId], map: "ChainId")
}
